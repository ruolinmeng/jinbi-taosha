<!DOCTYPE html>
<html>
<head>
  <title>禁闭逃杀 - 游戏地图</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    .map {
      position: relative;
      display: grid;
      grid-template-columns: repeat(8, 120px);
      grid-auto-rows: 80px;
      gap: 5px;
      background: #333;
      padding: 10px;
    }
    .room {
      background: #eaeaea;
      border: 2px solid #444;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      font-weight: bold;
      position: relative;
      z-index: 1;
    }
    .spawn {
      background: #ffaaaa;
    }
    .special {
      background: #aaddff;
    }
    .empty {
      background: #555;
      border: none;
    }
    svg {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    .ladder {
      stroke: orange;
      stroke-width: 4;
    }
    .bridge {
      stroke: yellow;
      stroke-width: 4;
    }
    .tunnel {
      stroke: red;
      stroke-width: 3;
      stroke-dasharray: 6;
    }
  </style>
</head>
<body>
  <div class="map" id="map">
    <!-- Example rooms -->
    <div class="room special" id="201" style="grid-column: 4; grid-row: 1;">201<br>基因库</div>
    <div class="room special" id="101" style="grid-column: 2 / span 2; grid-row: 2;">101<br>水塔</div>
    <div class="room" id="102" style="grid-column: 4; grid-row: 2;">102<br>激光室</div>
    <div class="room" id="B101" style="grid-column: 1; grid-row: 3;">B101<br>控制室</div>
    <div class="room" id="B102" style="grid-column: 2; grid-row: 3;">B102<br>普通</div>
    <div class="room spawn" id="B103" style="grid-column: 3; grid-row: 3;">B103<br>出生点</div>
    
    <div class="room" id="B104" style="grid-column: 4; grid-row: 3;">B104<br>普通</div>
    <div class="room special" id="B105" style="grid-column: 5; grid-row: 3;">B105<br>回收站</div>
    <div class="room" id="B205" style="grid-column: 5; grid-row: 4;">B205<br>普通</div>
    <div class="room" id="B503" style="grid-column: 5; grid-row: 7;">B503<br>垃圾场</div>
    <div class="room" id="B305" style="grid-column: 5; grid-row: 5;">B305<br>普通</div>
    <div class="room" id="B304" style="grid-column: 4; grid-row: 5;">B304<br>操作室</div>
    <div class="room" id="B401" style="grid-column: 4; grid-row: 6;">B401<br>普通</div>


    <div class="room special" id="202" style="grid-column: 7 / span 2; grid-row: 1;">202<br>停机坪</div>
    <div class="room spawn" id="103" style="grid-column: 7; grid-row: 2;">103<br>出生点</div>
    <div class="room" id="104" style="grid-column: 8; grid-row: 2;">104<br>普通</div>
    <!-- SVG for connections -->
    <svg id="connections"></svg>
  </div>

  <script>
    // Define connections {from, to, type}
    const connections = [
      { from: "201", to: "102", type: "ladder" },
      { from: "101", to: "B102", type: "ladder" },
      { from: "102", to: "B104", type: "ladder" },
      { from: "B105", to: "B205", type: "ladder" },
      { from: "B105", to: "B503", type: "tunnel" },
      { from: "B205", to: "B305", type: "ladder" },
      { from: "B304", to: "B401", type: "ladder" }
    ];

    function drawConnections() {
      const svg = document.getElementById("connections");
      connections.forEach(conn => {
        const fromEl = document.getElementById(conn.from);
        const toEl = document.getElementById(conn.to);
        if (!fromEl || !toEl) return;

        const fromRect = fromEl.getBoundingClientRect();
        const toRect = toEl.getBoundingClientRect();
        const mapRect = svg.getBoundingClientRect();

        const x1 = fromRect.left + fromRect.width / 2 - mapRect.left;
        const y1 = fromRect.top + fromRect.height / 2 - mapRect.top;
        const x2 = toRect.left + toRect.width / 2 - mapRect.left;
        const y2 = toRect.top + toRect.height / 2 - mapRect.top;

        const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
        line.setAttribute("x1", x1);
        line.setAttribute("y1", y1);
        line.setAttribute("x2", x2);
        line.setAttribute("y2", y2);
        line.setAttribute("class", conn.type);
        svg.appendChild(line);
      });
    }

    window.onload = drawConnections;
  </script>
</body>
</html>
